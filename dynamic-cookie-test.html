<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π Cookie –°–∏—Å—Ç–µ–º—ã</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
        .status { padding: 15px; margin: 10px 0; border-radius: 8px; border-left: 4px solid; }
        .success { background: #d4edda; color: #155724; border-left-color: #28a745; }
        .error { background: #f8d7da; color: #721c24; border-left-color: #dc3545; }
        .warning { background: #fff3cd; color: #856404; border-left-color: #ffc107; }
        .info { background: #d1ecf1; color: #0c5460; border-left-color: #17a2b8; }
        button { padding: 12px 20px; margin: 8px; cursor: pointer; border: none; border-radius: 6px; background: #007bff; color: white; font-size: 14px; }
        button:hover { background: #0056b3; }
        button.danger { background: #dc3545; }
        button.danger:hover { background: #c82333; }
        button.success { background: #28a745; }
        button.success:hover { background: #218838; }
        pre { background: #f8f9fa; padding: 15px; border-radius: 6px; overflow-x: auto; font-size: 12px; border: 1px solid #dee2e6; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0; }
        .card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); border: 1px solid #e9ecef; }
        .real-time { background: #fff; border: 2px solid #007bff; border-radius: 8px; padding: 15px; margin: 10px 0; }
        .indicator { display: inline-block; width: 12px; height: 12px; border-radius: 50%; margin-right: 8px; }
        .indicator.green { background: #28a745; }
        .indicator.red { background: #dc3545; }
        .indicator.yellow { background: #ffc107; }
        @media (max-width: 768px) { .grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <h1>üß™ –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –¢–µ—Å—Ç–∏—Ä–æ–≤–∫–∞ Cookie –°–∏—Å—Ç–µ–º—ã</h1>
    
    <div class="real-time">
        <h3>üì° –°—Ç–∞—Ç—É—Å –≤ –†–µ–∞–ª—å–Ω–æ–º –í—Ä–µ–º–µ–Ω–∏</h3>
        <div id="real-time-status">
            <div><span class="indicator yellow" id="cookie-indicator"></span>Cookie: <span id="cookie-status">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span></div>
            <div><span class="indicator yellow" id="banner-indicator"></span>–ë–∞–Ω–Ω–µ—Ä: <span id="banner-status">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span></div>
            <div><span class="indicator yellow" id="yandex-indicator"></span>–Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞: <span id="yandex-status">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span></div>
            <div><span class="indicator yellow" id="google-indicator"></span>Google Analytics: <span id="google-status">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span></div>
        </div>
    </div>

    <div class="grid">
        <div class="card">
            <h3>üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –°–∏—Å—Ç–µ–º—ã</h3>
            <button onclick="runFullTest()">üîÑ –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω—ã–π —Ç–µ—Å—Ç</button>
            <button onclick="testCookieBanner()" class="success">üì¢ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–∞–Ω–Ω–µ—Ä</button>
            <button onclick="testAnalytics()">üìä –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É</button>
            <button onclick="simulateUserFlow()">üë§ –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</button>
            <button onclick="clearAllData()" class="danger">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ</button>
        </div>
        
        <div class="card">
            <h3>üìã –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¢–µ—Å—Ç–æ–≤</h3>
            <div id="test-results">
                <div class="status info">–ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω—ã–π —Ç–µ—Å—Ç" –¥–ª—è –Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏</div>
            </div>
        </div>
    </div>

    <div class="card">
        <h3>üîß –î–µ—Ç–∞–ª—å–Ω–∞—è –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</h3>
        <div id="detailed-info">
            <h4>Cookie –°—Ç–∞—Ç—É—Å:</h4>
            <div id="cookie-details"></div>
            
            <h4>–°–µ—Ç–µ–≤—ã–µ –ó–∞–ø—Ä–æ—Å—ã:</h4>
            <div id="network-details"></div>
            
            <h4>JavaScript –û—à–∏–±–∫–∏:</h4>
            <div id="error-details"></div>
        </div>
    </div>

    <div class="card">
        <h3>üìä –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
        <pre id="debug-info">–ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...</pre>
    </div>

    <div class="card">
        <h3>üéØ –ü–æ—à–∞–≥–æ–≤–∞—è –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h3>
        <ol>
            <li><strong>–û—á–∏—Å—Ç–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ:</strong> –ù–∞–∂–º–∏—Ç–µ "–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ"</li>
            <li><strong>–û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É:</strong> F5 –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</li>
            <li><strong>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–Ω–Ω–µ—Ä:</strong> –î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É</li>
            <li><strong>–ù–∞–∂–º–∏—Ç–µ "–ü—Ä–∏–Ω—è—Ç—å":</strong> –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ cookie</li>
            <li><strong>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–Ω–∞–ª–∏—Ç–∏–∫—É:</strong> –î–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è —Å–∫—Ä–∏–ø—Ç—ã –º–µ—Ç—Ä–∏–∫</li>
            <li><strong>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–±—ã—Ç–∏—è:</strong> –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è</li>
        </ol>
    </div>

    <script src="cookie-consent.js"></script>
    
    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
        let testResults = [];
        let networkRequests = [];
        let jsErrors = [];

        // –ü–µ—Ä–µ—Ö–≤–∞—Ç —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
        const originalFetch = window.fetch;
        window.fetch = function(...args) {
            const url = args[0];
            if (typeof url === 'string' && (url.includes('yandex') || url.includes('google') || url.includes('gtag'))) {
                networkRequests.push({
                    url: url,
                    timestamp: new Date().toISOString(),
                    type: 'fetch'
                });
                updateNetworkDetails();
            }
            return originalFetch.apply(this, args);
        };

        // –ü–µ—Ä–µ—Ö–≤–∞—Ç –æ—à–∏–±–æ–∫
        window.addEventListener('error', function(event) {
            if (event.filename && event.filename.includes('cookie-consent')) {
                jsErrors.push({
                    message: event.message,
                    filename: event.filename,
                    lineno: event.lineno,
                    timestamp: new Date().toISOString()
                });
                updateErrorDetails();
            }
        });

        function addTestResult(test, status, message) {
            testResults.push({
                test: test,
                status: status,
                message: message,
                timestamp: new Date().toISOString()
            });
            updateTestResults();
        }

        function updateIndicator(indicatorId, status) {
            const indicator = document.getElementById(indicatorId);
            if (indicator) {
                indicator.className = `indicator ${status}`;
            }
        }

        function updateRealTimeStatus() {
            // Cookie —Å—Ç–∞—Ç—É—Å
            const hasConsent = document.cookie.includes('cookie_consent=all');
            const cookieStatus = document.getElementById('cookie-status');
            if (hasConsent) {
                cookieStatus.textContent = '–°–æ–≥–ª–∞—Å–∏–µ –ø–æ–ª—É—á–µ–Ω–æ';
                updateIndicator('cookie-indicator', 'green');
            } else {
                cookieStatus.textContent = '–°–æ–≥–ª–∞—Å–∏–µ –Ω–µ –ø–æ–ª—É—á–µ–Ω–æ';
                updateIndicator('cookie-indicator', 'red');
            }

            // –ë–∞–Ω–Ω–µ—Ä —Å—Ç–∞—Ç—É—Å
            const banner = document.getElementById('cookie-banner');
            const bannerStatus = document.getElementById('banner-status');
            if (banner) {
                const isVisible = banner.style.visibility === 'visible' && banner.style.opacity === '1';
                if (isVisible) {
                    bannerStatus.textContent = '–í–∏–¥–µ–Ω';
                    updateIndicator('banner-indicator', 'green');
                } else {
                    bannerStatus.textContent = '–°–∫—Ä—ã—Ç';
                    updateIndicator('banner-indicator', 'yellow');
                }
            } else {
                bannerStatus.textContent = '–ù–µ —Å–æ–∑–¥–∞–Ω';
                updateIndicator('banner-indicator', 'red');
            }

            // –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞ —Å—Ç–∞—Ç—É—Å
            const yandexStatus = document.getElementById('yandex-status');
            if (typeof window.ym !== 'undefined') {
                yandexStatus.textContent = '–ó–∞–≥—Ä—É–∂–µ–Ω–∞';
                updateIndicator('yandex-indicator', 'green');
            } else {
                yandexStatus.textContent = '–ù–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞';
                updateIndicator('yandex-indicator', 'red');
            }

            // Google Analytics —Å—Ç–∞—Ç—É—Å
            const googleStatus = document.getElementById('google-status');
            if (typeof window.gtag !== 'undefined') {
                googleStatus.textContent = '–ó–∞–≥—Ä—É–∂–µ–Ω';
                updateIndicator('google-indicator', 'green');
            } else {
                googleStatus.textContent = '–ù–µ –∑–∞–≥—Ä—É–∂–µ–Ω';
                updateIndicator('google-indicator', 'red');
            }
        }

        function updateTestResults() {
            const resultsDiv = document.getElementById('test-results');
            const html = testResults.map(result => {
                const statusClass = result.status === 'success' ? 'success' : 
                                 result.status === 'error' ? 'error' : 'warning';
                const icon = result.status === 'success' ? '‚úÖ' : 
                           result.status === 'error' ? '‚ùå' : '‚ö†Ô∏è';
                return `<div class="status ${statusClass}">${icon} <strong>${result.test}:</strong> ${result.message}</div>`;
            }).reverse().join('');
            resultsDiv.innerHTML = html || '<div class="status info">–¢–µ—Å—Ç—ã –µ—â–µ –Ω–µ –∑–∞–ø—É—â–µ–Ω—ã</div>';
        }

        function updateCookieDetails() {
            const details = document.getElementById('cookie-details');
            const cookies = document.cookie.split(';').map(c => c.trim()).filter(c => c);
            details.innerHTML = `
                <p><strong>–í—Å–µ–≥–æ cookie:</strong> ${cookies.length}</p>
                <p><strong>Cookie —Å–æ–≥–ª–∞—Å–∏—è:</strong> ${document.cookie.includes('cookie_consent=all') ? '‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ' : '‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç'}</p>
                <p><strong>–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ cookie:</strong></p>
                <ul>
                    <li>_ym_uid: ${document.cookie.includes('_ym_uid') ? '‚úÖ' : '‚ùå'}</li>
                    <li>_ga: ${document.cookie.includes('_ga') ? '‚úÖ' : '‚ùå'}</li>
                    <li>_gid: ${document.cookie.includes('_gid') ? '‚úÖ' : '‚ùå'}</li>
                </ul>
                <p><strong>–í—Å–µ cookie:</strong></p>
                <pre style="font-size: 10px;">${document.cookie || '(–ø—É—Å—Ç–æ)'}</pre>
            `;
        }

        function updateNetworkDetails() {
            const details = document.getElementById('network-details');
            const html = networkRequests.map(req => 
                `<div style="margin: 5px 0; padding: 5px; background: #f8f9fa; border-radius: 4px;">
                    <strong>${req.type.toUpperCase()}:</strong> ${req.url}<br>
                    <small>${req.timestamp}</small>
                </div>`
            ).join('');
            details.innerHTML = html || '<p>–°–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ –ø–æ–∫–∞ –Ω–µ—Ç</p>';
        }

        function updateErrorDetails() {
            const details = document.getElementById('error-details');
            const html = jsErrors.map(error => 
                `<div style="margin: 5px 0; padding: 5px; background: #f8d7da; border-radius: 4px;">
                    <strong>–û—à–∏–±–∫–∞:</strong> ${error.message}<br>
                    <strong>–§–∞–π–ª:</strong> ${error.filename}:${error.lineno}<br>
                    <small>${error.timestamp}</small>
                </div>`
            ).join('');
            details.innerHTML = html || '<p>–û—à–∏–±–æ–∫ JavaScript –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ</p>';
        }

        function updateDebugInfo() {
            const debugInfo = {
                '–í—Ä–µ–º—è –ø—Ä–æ–≤–µ—Ä–∫–∏': new Date().toISOString(),
                'URL —Å—Ç—Ä–∞–Ω–∏—Ü—ã': window.location.href,
                'User Agent': navigator.userAgent,
                'Cookie —Å–æ–≥–ª–∞—Å–∏–µ': document.cookie.includes('cookie_consent=all'),
                '–Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞ (ym)': typeof window.ym !== 'undefined',
                'Google Analytics (gtag)': typeof window.gtag !== 'undefined',
                'DataLayer': typeof window.dataLayer !== 'undefined',
                '–ë–∞–Ω–Ω–µ—Ä –≤ DOM': !!document.getElementById('cookie-banner'),
                '–í—Å–µ–≥–æ cookie': document.cookie.split(';').filter(c => c.trim()).length,
                '–°–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã': networkRequests.length,
                'JavaScript –æ—à–∏–±–∫–∏': jsErrors.length
            };
            
            document.getElementById('debug-info').textContent = JSON.stringify(debugInfo, null, 2);
        }

        function testCookieBanner() {
            addTestResult('–¢–µ—Å—Ç –±–∞–Ω–Ω–µ—Ä–∞', 'info', '–ù–∞—á–∞–ª–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–∞–Ω–Ω–µ—Ä–∞...');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ –±–∞–Ω–Ω–µ—Ä–∞
            setTimeout(() => {
                const banner = document.getElementById('cookie-banner');
                if (banner) {
                    addTestResult('–°–æ–∑–¥–∞–Ω–∏–µ –±–∞–Ω–Ω–µ—Ä–∞', 'success', '–ë–∞–Ω–Ω–µ—Ä —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω –≤ DOM');
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∏–¥–∏–º–æ—Å—Ç—å
                    const isVisible = banner.style.visibility === 'visible' && banner.style.opacity === '1';
                    if (isVisible) {
                        addTestResult('–í–∏–¥–∏–º–æ—Å—Ç—å –±–∞–Ω–Ω–µ—Ä–∞', 'success', '–ë–∞–Ω–Ω–µ—Ä –≤–∏–¥–µ–Ω –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ');
                    } else {
                        addTestResult('–í–∏–¥–∏–º–æ—Å—Ç—å –±–∞–Ω–Ω–µ—Ä–∞', 'warning', '–ë–∞–Ω–Ω–µ—Ä —Å–æ–∑–¥–∞–Ω, –Ω–æ –Ω–µ –≤–∏–¥–µ–Ω');
                    }
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–Ω–æ–ø–∫—É
                    const button = document.getElementById('cookie-accept');
                    if (button) {
                        addTestResult('–ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–Ω—è—Ç—å"', 'success', '–ö–Ω–æ–ø–∫–∞ –Ω–∞–π–¥–µ–Ω–∞ –∏ –¥–æ—Å—Ç—É–ø–Ω–∞');
                    } else {
                        addTestResult('–ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–Ω—è—Ç—å"', 'error', '–ö–Ω–æ–ø–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
                    }
                } else {
                    addTestResult('–°–æ–∑–¥–∞–Ω–∏–µ –±–∞–Ω–Ω–µ—Ä–∞', 'error', '–ë–∞–Ω–Ω–µ—Ä –Ω–µ —Å–æ–∑–¥–∞–Ω');
                }
            }, 2000);
        }

        function testAnalytics() {
            addTestResult('–¢–µ—Å—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫–∏', 'info', '–ù–∞—á–∞–ª–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏...');
            
            setTimeout(() => {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫—É
                if (typeof window.ym !== 'undefined') {
                    addTestResult('–Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞', 'success', '–°–∫—Ä–∏–ø—Ç –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω');
                    
                    try {
                        window.ym(106225686, 'hit', window.location.href, {
                            title: '–¢–µ—Å—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã',
                            referer: document.referrer
                        });
                        addTestResult('–Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞ hit', 'success', '–¢–µ—Å—Ç–æ–≤—ã–π hit –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω');
                    } catch (e) {
                        addTestResult('–Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞ hit', 'error', `–û—à–∏–±–∫–∞: ${e.message}`);
                    }
                } else {
                    addTestResult('–Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞', 'error', '–°–∫—Ä–∏–ø—Ç –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º Google Analytics
                if (typeof window.gtag !== 'undefined') {
                    addTestResult('Google Analytics', 'success', '–°–∫—Ä–∏–ø—Ç Google Analytics –∑–∞–≥—Ä—É–∂–µ–Ω');
                    
                    try {
                        window.gtag('event', 'test_dynamic_system', {
                            'event_category': 'debug',
                            'event_label': 'cookie_test'
                        });
                        addTestResult('Google Analytics event', 'success', '–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ');
                    } catch (e) {
                        addTestResult('Google Analytics event', 'error', `–û—à–∏–±–∫–∞: ${e.message}`);
                    }
                } else {
                    addTestResult('Google Analytics', 'error', '–°–∫—Ä–∏–ø—Ç Google Analytics –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
                }
            }, 1000);
        }

        function simulateUserFlow() {
            addTestResult('–°–∏–º—É–ª—è—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', 'info', '–ù–∞—á–∞–ª–æ —Å–∏–º—É–ª—è—Ü–∏–∏ –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞...');
            
            // –®–∞–≥ 1: –û—á–∏—Å—Ç–∫–∞ cookie
            document.cookie = 'cookie_consent=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
            addTestResult('–û—á–∏—Å—Ç–∫–∞ cookie', 'success', 'Cookie –æ—á–∏—â–µ–Ω—ã');
            
            // –®–∞–≥ 2: –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–∏–º—É–ª—è—Ü–∏–∏
            setTimeout(() => {
                // –°–∏–º—É–ª—è—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –±–∞–Ω–Ω–µ—Ä–∞
                if (typeof showCookieBanner === 'function') {
                    showCookieBanner();
                    addTestResult('–ü–æ–∫–∞–∑ –±–∞–Ω–Ω–µ—Ä–∞', 'success', '–ë–∞–Ω–Ω–µ—Ä –ø–æ–∫–∞–∑–∞–Ω');
                }
                
                // –®–∞–≥ 3: –°–∏–º—É–ª—è—Ü–∏—è –∫–ª–∏–∫–∞ –Ω–∞ "–ü—Ä–∏–Ω—è—Ç—å"
                setTimeout(() => {
                    const button = document.getElementById('cookie-accept');
                    if (button) {
                        button.click();
                        addTestResult('–ö–ª–∏–∫ –Ω–∞ "–ü—Ä–∏–Ω—è—Ç—å"', 'success', '–û–±—Ä–∞–±–æ—Ç–∞–Ω –∫–ª–∏–∫ –Ω–∞ –∫–Ω–æ–ø–∫—É');
                        
                        // –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
                        setTimeout(() => {
                            const hasConsent = document.cookie.includes('cookie_consent=all');
                            if (hasConsent) {
                                addTestResult('–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ cookie', 'success', 'Cookie —Å–æ–≥–ª–∞—Å–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã');
                            } else {
                                addTestResult('–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ cookie', 'error', 'Cookie —Å–æ–≥–ª–∞—Å–∏—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã');
                            }
                            
                            testAnalytics();
                        }, 1000);
                    } else {
                        addTestResult('–ö–ª–∏–∫ –Ω–∞ "–ü—Ä–∏–Ω—è—Ç—å"', 'error', '–ö–Ω–æ–ø–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
                    }
                }, 2000);
            }, 1000);
        }

        function runFullTest() {
            addTestResult('–ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç', 'info', '–ó–∞–ø—É—Å–∫ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏—Å—Ç–µ–º—ã...');
            testCookieBanner();
            setTimeout(() => testAnalytics(), 3000);
            setTimeout(() => updateAllDetails(), 5000);
        }

        function clearAllData() {
            document.cookie = 'cookie_consent=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
            document.cookie = '_ym_uid=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
            document.cookie = '_ym_d=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
            document.cookie = '_ga=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
            document.cookie = '_gid=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
            
            // –£–¥–∞–ª—è–µ–º –±–∞–Ω–Ω–µ—Ä –µ—Å–ª–∏ –µ—Å—Ç—å
            const banner = document.getElementById('cookie-banner');
            if (banner) {
                banner.remove();
            }
            
            addTestResult('–û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö', 'success', '–í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã');
            setTimeout(() => window.location.reload(), 1000);
        }

        function updateAllDetails() {
            updateCookieDetails();
            updateNetworkDetails();
            updateErrorDetails();
            updateDebugInfo();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                updateRealTimeStatus();
                updateAllDetails();
                addTestResult('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è', 'success', '–°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≥–æ—Ç–æ–≤–∞');
            }, 1500);
            
            // –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
            setInterval(updateRealTimeStatus, 2000);
            
            // –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
            setInterval(updateAllDetails, 5000);
        });
    </script>
</body>
</html>
